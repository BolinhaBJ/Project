(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a08e"],{ba92:function(a,e,t){"use strict";t.r(e);var o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("b-modal",{attrs:{id:"modal-lg","header-bg-variant":"primary","header-text-variant":"light",size:"lg",title:"Informações do Agendamento"},on:{ok:a.handleOk,hidden:a.resetModal},scopedSlots:a._u([{key:"modal-footer",fn:function(e){var o=e.ok,n=e.hide;return[t("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(a){return o()}}},[a._v(" Salvar ")]),t("b-button",{attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(a){return n()}}},[a._v(" Fechar ")]),t("b-button",{attrs:{size:"sm",variant:"outline-success"},on:{click:a.resetModal}},[a._v(" Novo ")])]}}])},[t("div",[t("b-card",{attrs:{"no-body":""}},[t("b-tabs",{attrs:{pills:"",card:""},model:{value:a.tabIndexAgendamento,callback:function(e){a.tabIndexAgendamento=e},expression:"tabIndexAgendamento"}},[t("b-tab",{attrs:{active:""},scopedSlots:a._u([1!=a.tabIndexAgendamento?{key:"title",fn:function(){return[t("b-spinner",{staticClass:"mb-1 mr-2",attrs:{type:"border",small:""}}),a._v(" Adicionar Agendamento ")]},proxy:!0}:{key:"title",fn:function(){return[a._v(" Adicionar Agendamento ")]},proxy:!0}],null,!0)},[t("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),a.handleSubmit(e)}}},[t("b-form-group",[t("div",{staticClass:"procedimento"},[t("b-form-input",{attrs:{type:"text",hidden:""},model:{value:a.agendamento.uuid,callback:function(e){a.$set(a.agendamento,"uuid",e)},expression:"agendamento.uuid"}}),t("label",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:"Campo Obrigatorio, informe o Procedimento a ser realizado, caso não tenha faça o cadastro no icone ao lado ( + )",expression:"'Campo Obrigatorio, informe o Procedimento a ser realizado, caso não tenha faça o cadastro no icone ao lado ( + )'",modifiers:{hover:!0}}]},[a._v("Procedimento ")]),t("b-icon-plus-circle",{staticClass:"iconsAgenda h5",attrs:{variant:"primary"},on:{click:a.adicionarProcedimento}})],1),t("b-form-select",{attrs:{options:a.optionsProcedimento,size:"sm"},on:{change:a.testeidProc},model:{value:a.agendamento.idProcedimento,callback:function(e){a.$set(a.agendamento,"idProcedimento",e)},expression:"agendamento.idProcedimento"}}),t("label",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:"Campo Obrigatorio, Esse título será exibido na Agenda como forma de indentificar o Agendamento",expression:"'Campo Obrigatorio, Esse título será exibido na Agenda como forma de indentificar o Agendamento'",modifiers:{hover:!0}}],staticClass:"mt-2"},[a._v("Titulo")]),t("b-form-input",{attrs:{type:"text",size:"sm"},model:{value:a.agendamento.titulo,callback:function(e){a.$set(a.agendamento,"titulo",e)},expression:"agendamento.titulo"}}),t("label",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:"Campo Obrigatorio, Selecione o Paciente o qual ira fazer o agendamento, caso não tenha, vá para aba de Cadastro de Paciente",expression:"'Campo Obrigatorio, Selecione o Paciente o qual ira fazer o agendamento, caso não tenha, vá para aba de Cadastro de Paciente'",modifiers:{hover:!0}}],staticClass:"mt-2"},[a._v("Paciente")]),t("b-form-select",{attrs:{options:this.ListaPaciente,size:"sm"},on:{change:a.pacienteSelecionado},model:{value:a.agendamento.idPaciente,callback:function(e){a.$set(a.agendamento,"idPaciente",e)},expression:"agendamento.idPaciente"}}),t("label",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:"Campo Obrigatorio, Informe a Data que a consulta será realizada",expression:"'Campo Obrigatorio, Informe a Data que a consulta será realizada'",modifiers:{hover:!0}}],staticClass:"mt-2"},[a._v("Data do Procedimento")]),t("b-form-input",{staticClass:"bg-primary text-white",attrs:{size:"sm",type:"date"},model:{value:a.agendamento.data,callback:function(e){a.$set(a.agendamento,"data",e)},expression:"agendamento.data"}}),t("label",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:"Campo Obrigatorio, Informe o Horário do Atendimento",expression:"'Campo Obrigatorio, Informe o Horário do Atendimento'",modifiers:{hover:!0}}],staticClass:"mt-2"},[a._v("Horário do Procedimento")]),t("input",{directives:[{name:"mask",rawName:"v-mask",value:"##:##",expression:"'##:##'"},{name:"model",rawName:"v-model",value:a.agendamento.horario,expression:"agendamento.horario"}],staticClass:"form-control bg-primary text-white col-sm-2",attrs:{type:"text"},domProps:{value:a.agendamento.horario},on:{input:function(e){e.target.composing||a.$set(a.agendamento,"horario",e.target.value)}}}),t("label",{directives:[{name:"b-popover",rawName:"v-b-popover.hover",value:"Campo Obrigatorio, Informe o Valor a ser pago pela consulta",expression:"'Campo Obrigatorio, Informe o Valor a ser pago pela consulta'",modifiers:{hover:!0}}],staticClass:"mt-2 mr-2"},[a._v("Valor do Procedimento")]),t("b-form-input",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],staticClass:"form-control bg-primary text-white col-sm-2",model:{value:a.agendamento.valorConsulta,callback:function(e){a.$set(a.agendamento,"valorConsulta",e)},expression:"agendamento.valorConsulta"}}),t("b-form",{staticClass:"mt-3",attrs:{inline:""}},[t("label",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.bottom",value:"Campo Obrigatorio, caso não tenha nenhuma Forma de Pagamento cadastre uma fictícia",expression:"'Campo Obrigatorio, caso não tenha nenhuma Forma de Pagamento cadastre uma fictícia'",modifiers:{hover:!0,bottom:!0}}],staticClass:"mr-2"},[a._v("Forma de Pagamento "),t("b-icon-plus-circle",{staticClass:"iconsAgenda h6 ml-2",attrs:{variant:"primary"},on:{click:a.openFormaPagamento}})],1),t("b-form-select",{staticClass:"col-3",attrs:{options:this.formaDePagamento,size:"sm"},on:{change:a.testeForma},scopedSlots:a._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null}},[a._v("Sem Forma de Pagamento ")])]},proxy:!0}]),model:{value:a.agendamento.idFormaPagamento,callback:function(e){a.$set(a.agendamento,"idFormaPagamento",e)},expression:"agendamento.idFormaPagamento"}}),t("label",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.bottom",value:"Campo Obrigatorio, caso não tenha nenhuma Ótica Parceira cadastre uma fictícia",expression:"'Campo Obrigatorio, caso não tenha nenhuma Ótica Parceira cadastre uma fictícia'",modifiers:{hover:!0,bottom:!0}}],staticClass:"mr-2 ml-2"},[a._v("Ótica Parceira "),t("b-icon-plus-circle",{staticClass:"iconsAgenda h6 ml-2",attrs:{variant:"primary"},on:{click:a.openModalOticaParceira}})],1),t("b-form-select",{staticClass:"col-3",attrs:{options:this.oticasParceiras,size:"sm"},on:{change:a.testeOtica},scopedSlots:a._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null}},[a._v("Sem Ótica Parceira ")])]},proxy:!0}]),model:{value:a.agendamento.idOticaParceira,callback:function(e){a.$set(a.agendamento,"idOticaParceira",e)},expression:"agendamento.idOticaParceira"}})],1),t("label",{staticClass:"mt-2"},[a._v("Descrição")]),t("b-form-textarea",{attrs:{id:"textarea",placeholder:"Descrição ...",rows:"3","max-rows":"6"},model:{value:a.agendamento.observacao,callback:function(e){a.$set(a.agendamento,"observacao",e)},expression:"agendamento.observacao"}})],1)],1)]),t("b-tab",{scopedSlots:a._u([1===a.tabIndexAgendamento?{key:"title",fn:function(){return[t("b-spinner",{staticClass:"mb-1 mr-2",attrs:{type:"border",small:""}}),a._v(" Pesquisa ")]},proxy:!0}:{key:"title",fn:function(){return[a._v(" Pesquisa ")]},proxy:!0}],null,!0)},[t("div",{staticClass:"conteudo"},[t("div",[t("div",{staticClass:"mb-2"},[t("label",[a._v(" Data Inicial")]),t("b-form-input",{staticClass:"mr-2 w-1",attrs:{size:"sm",type:"date"},model:{value:a.dataInicial,callback:function(e){a.dataInicial=e},expression:"dataInicial"}})],1),t("div",{staticClass:"mb-2"},[t("label",[a._v(" Data Final")]),t("b-form-input",{staticClass:"mr-2",attrs:{size:"sm",type:"date"},model:{value:a.dataFinal,callback:function(e){a.dataFinal=e},expression:"dataFinal"}})],1)]),t("div",{staticClass:"w-100 mb-2"},[t("label",[a._v(" Paciente")]),t("b-form-select",{attrs:{options:this.ListaPaciente,size:"sm"},on:{change:a.pacienteSelectPesquisa},model:{value:a.pacientePesquisa,callback:function(e){a.pacientePesquisa=e},expression:"pacientePesquisa"}})],1),t("div",{staticClass:"mt-2 mb-2"},[t("div",[t("b-button",{staticClass:"mr-4",attrs:{variant:"primary",size:"sm"},on:{click:a.pesquisarAgendamentos}},[a._v("Pesquisar")]),a.page<a.totalPage?t("b-button",{staticClass:"mr-2",attrs:{pill:"",variant:"primary",size:"sm"},on:{click:a.proximaPage}},[a._v("Proxima Pagina")]):t("b-button",{staticClass:"mr-2",attrs:{pill:"",variant:"primary",disabled:"",size:"sm"}},[a._v("Proxima Pagina")]),t("label",[a._v(" Total de Páginas "),t("b-badge",{attrs:{variant:"primary"}},[a._v(a._s(a.totalPage))])],1),t("label",{staticClass:"ml-4"},[a._v(" Página Atual "),t("b-badge",{attrs:{variant:"primary"}},[a._v(a._s(a.page))])],1),a.page>1?t("b-button",{staticClass:"mr-2 ml-2",attrs:{pill:"",variant:"primary",size:"sm"},on:{click:a.anteriorPage}},[a._v("Pagina Anterior")]):t("b-button",{staticClass:"mr-2 ml-2",attrs:{pill:"",variant:"primary",disabled:"",size:"sm"}},[a._v("Pagina Anterior")])],1)])]),t("div",{staticClass:"tabela"},[t("table",{staticClass:"table table-sm"},[t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[a._v("Titúlo Agendamento")]),t("th",{attrs:{scope:"col"}},[a._v("Data Agendamento")]),t("th",{attrs:{scope:"col"}},[a._v("Editar")]),t("th",{attrs:{scope:"col"}},[a._v("Excluir")])])]),t("tbody",a._l(a.agendamentoPesquisa,(function(e){return t("tr",{key:e.uuid},[t("td",[a._v(a._s(e.titulo))]),t("td",[a._v(a._s(e.data))]),t("td",[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-lg",modifiers:{"modal-lg":!0}}],attrs:{pill:"",variant:"primary"},on:{click:function(t){return a.editarAgendamento(e.uuid)}}},[a._v("Editar")])],1),t("td",[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-lg",modifiers:{"modal-lg":!0}}],attrs:{pill:"",variant:"primary"},on:{click:function(t){return a.excluirAgendamento(e.uuid)}}},[a._v("Excluir")])],1)])})),0)])])])],1)],1)],1),t("ModalFormaPagamento",{on:{reloadForma:a.readFormaPagamento}}),t("ModalOticaParceira",{on:{realoadOpticaP:a.readOticaParceira}})],1)},n=[],r=t("1da1"),i=t("5530"),s=(t("96cf"),t("d3b7"),t("3ca3"),t("ddb0"),t("ac1f"),t("5319"),t("d81d"),t("159b"),t("2f62")),c=t("ba79"),d=t("b37f"),m=t("200d"),l=t("89f7"),u=t("c1df"),p=t.n(u),g={props:{dataAgenda:{type:String}},components:{ModalFormaPagamento:function(){return Promise.resolve().then(t.bind(null,"cf84"))},ModalOticaParceira:function(){return t.e("chunk-2d0af030").then(t.bind(null,"0d06"))}},data:function(){return{pacientePesquisa:"",agendamentoPesquisa:[],idPacientePesquisa:-1,oticasParceirasSelect:null,dataInicial:"",dataFinal:"",oticasParceiras:[],formaPagamentoSelect:null,formaDePagamento:[],optionsProcedimento:[],ListaPaciente:[],tabIndexAgendamento:0,money:{decimal:",",thousands:".",prefix:"R$ ",precision:2,masked:!1},loadEventos:[],totalPage:0,page:0,pagePaciente:0,agendamento:{uuid:"",idProcedimento:"",idFormaPagamento:null,idOticaParceira:null,idPaciente:"",data:"",valorConsulta:"00,00",horario:"00:00",atendido:!1,recebido:!1,observacao:"",titulo:"",dataPagamento:null}}},computed:Object(i["a"])({},Object(s["c"])({pacienteSelect:function(a){return a.pacienteSelect},procedimentoSelect:function(a){return a.procedimentoSelect}})),methods:{testeOtica:function(){},testeForma:function(){},testeidProc:function(){},pacienteSelecionado:function(){},adicionarProcedimento:function(){this.$bvModal.show("modal-lg-addProcedimento"),this.$emit("openModalProcedimento")},loadEventosEmit:function(){this.$emit("reloadAgendamentos")},CreateObject:function(a){return{id:a.uuid,title:a.titulo,start:p()(a.data).format("YYYY-MM-DD"),description:a.observacao}},saveAgendamento:function(){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,null!==a.agendamento.idFormaPagamento&&!a.agendamento.idOticaParceira){e.next=4;break}return a.showAlert("info","O campo de Forma de Pegamento e Ótica Parceira são Obrigatorios"),e.abrupt("return");case 4:if(""!==a.agendamento.uuid){e.next=13;break}return a.agendamento.valorConsulta=a.agendamento.valorConsulta.replace("R$","").replace(" ","").replace(".","").replace(",","."),e.next=8,l["a"].save(a.agendamento);case 8:return t=e.sent,a.agendamento.uuid=t.data.uuid,a.showAlert("success","Agendamento Realziado Com Sucesso"),a.loadEventosEmit(),e.abrupt("return");case 13:return delete a.agendamento.nomePaciente,delete a.agendamento.uuidProcedimento,delete a.agendamento.uuidOticaParceira,delete a.agendamento.uuidFormaPagamento,delete a.agendamento.uuidPaciente,delete a.agendamento.descricao,a.agendamento.valorConsulta=a.agendamento.valorConsulta.replace("R$","").replace(" ","").replace(".","").replace(",","."),e.next=22,l["a"].update(a.agendamento.uuid,a.agendamento);case 22:a.showAlert("success","Agendamento Atualizado com Sucesso"),a.loadEventosEmit(),e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](0),a.showAlert("error","Ocorreu um erro");case 29:case"end":return e.stop()}}),e,null,[[0,26]])})))()},handleOk:function(a){a.preventDefault(),this.handleSubmit()},handleSubmit:function(){this.saveAgendamento()},pesquisarAgendamentos:function(){var a=arguments,e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=!(a.length>0&&void 0!==a[0])||a[0],t.prev=1,""!==e.dataInicial&&""!==e.dataFinal){t.next=5;break}return e.showAlert("info","Informe o periodo"),t.abrupt("return");case 5:if(""!==e.pacientePesquisa){t.next=18;break}return e.agendamentoPesquisa=[],t.next=9,l["a"].readDataPagination(e.dataInicial,e.dataFinal);case 9:if(n=t.sent,0!==n.data.result.result.length){t.next=13;break}return e.showAlert("info","Nenhuma informação Encontrada"),t.abrupt("return");case 13:e.agendamentoPesquisa=n.data.result.result,e.agendamentoPesquisa.map((function(a){a.data=p()(a.data).format("DD/MM/YYYY")})),e.agendamentoPesquisa.sort((function(a,e){return parseInt(a.data)-parseInt(e.data)})),e.totalPage=Math.ceil(n.data.result.total[0].count/5),t.next=25;break;case 18:return e.agendamentoPesquisa=[],t.next=21,l["a"].readDatePacienteNext(e.dataInicial,e.dataFinal,e.pacientePesquisa);case 21:r=t.sent,e.agendamentoPesquisa=r.data.agendamentos.result,e.agendamentoPesquisa.forEach((function(a){a.data=p()(a.data).format("DD/MM/YYYY")})),r.data.agendamentos.total[0].count>6&&!0===o&&e.showAlert("info","Existem mais registros, Altere o périodo caso queira ter acesso");case 25:t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](1),e.showAlert("error","erro ao Pesquisar consulta");case 30:case"end":return t.stop()}}),t,null,[[1,27]])})))()},proximaPage:function(){var a=this;this.page=this.page+1,l["a"].readDataPaginationProximo(this.dataInicial,this.dataFinal,this.page).then((function(e){a.agendamentoPesquisa=e.data.result.result,a.agendamentoPesquisa.map((function(a){a.data=p()(a.data).format("DD/MM/YYYY")})),a.agendamentoPesquisa.sort((function(a,e){return parseInt(a.data)-parseInt(e.data)}))})).catch((function(){a.showAlert("error","Erro na pesquisa dos agendamentos #pagination")}))},anteriorPage:function(){var a=this;this.page=this.page-1,l["a"].readDataPaginationProximo(this.dataInicial,this.dataFinal,this.page).then((function(e){a.agendamentoPesquisa=e.data.result.result,a.agendamentoPesquisa.map((function(a){a.data=p()(a.data).format("DD/MM/YYYY")})),a.agendamentoPesquisa.sort((function(a,e){return parseInt(a.data)-parseInt(e.data)}))})).catch((function(){a.showAlert("error","Erro na pesquisa dos agendamentos #pagination")}))},showAlert:function(a,e){this.$swal({icon:a,title:e,showConfirmButton:!1,timer:2500})},createFormaPagamento:function(a,e){return{text:a,value:e}},createOticaParceira:function(a,e){return{text:a,value:e}},readOticaParceira:function(){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a.oticasParceiras=[],e.next=4,m["a"].read();case 4:t=e.sent,t.data.oticaParceira.map((function(e){a.oticasParceiras.push(a.createOticaParceira(e.descricao,e.uuid))})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),a.showAlert("error","Erro na pesquisa ótica parceira");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},readFormaPagamento:function(){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a.formaDePagamento=[],e.next=4,c["a"].read();case 4:t=e.sent,t.data.formasPagamento.map((function(e){a.formaDePagamento.push(a.createFormaPagamento(e.descricao,e.uuid))})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),a.showAlert("error","Erro ao carregar forma de pagamento");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},Paciente:function(a,e){return{text:a,value:e}},procedimento:function(a,e){return{text:a,value:e}},list:function(){var a=this;d["a"].readAll().then((function(e){e.data.map((function(e){a.ListaPaciente.push(a.Paciente(e.nomePaciente,e.uuid))}))})).catch((function(){a.showAlert("error","Ocorreu um problema ao listar pacientes")}))},resetModal:function(){this.dataFinal="",this.dataInicial="",this.idPacientePesquisa=-1,this.agendamento={uuid:"",idProcedimento:"",idFormaPagamento:null,idOticaParceira:null,idPaciente:"",data:"",valorConsulta:"00,00",horario:"00:00",atendido:!1,recebido:!1,observacao:"",titulo:"",dataPagamento:null}},readAllProcedimentos:function(){this.optionsProcedimento=this.procedimentoSelect},pacienteSelectPesquisa:function(){this.$store.commit("PACIENTE_SELECTED",this.idPacientePesquisa)},openFormaPagamento:function(){this.$bvModal.show("modal-lg-addFormaPagamento")},openModalOticaParceira:function(){this.$bvModal.show("modal-lg-addOticaParceira")},editarAgendamento:function(a){var e=this;a?l["a"].readParams(a).then((function(a){Object.assign(e.agendamento,a.data.agendamento),e.agendamento.data=p()(e.agendamento.data).format("YYYY-MM-DD"),e.agendamento.idProcedimento=a.data.agendamento.uuidProcedimento,e.agendamento.idFormaPagamento=a.data.agendamento.uuidFormaPagamento,e.agendamento.idOticaParceira=a.data.agendamento.uuidOticaParceira,e.tabIndexAgendamento=0})).catch((function(){e.showAlert("error","Erro ao editar Agendamento")})):this.showAlert("info","Selecione um Registro")},excluirAgendamento:function(a){var e=this;a?l["a"].delete(a).then((function(){e.showAlert("success","Registro Deletado com Sucesso"),e.pesquisarAgendamentos(!1),e.loadEventosEmit()})).catch((function(){e.showAlert("error","Erro ao Deletar Registro")})):this.showAlert("info","Selecione um Registro")}},updated:function(){this.readAllProcedimentos()},created:function(){this.readFormaPagamento(),this.readOticaParceira(),this.list()},watch:{dataAgenda:function(){this.agendamento.data=this.dataAgenda},procedimentoSelect:function(){this.optionsProcedimento=this.procedimentoSelect}}},v=g,b=t("2877"),f=Object(b["a"])(v,o,n,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d21a08e.7d62fbf7.js.map